(this.webpackJsonpblog=this.webpackJsonpblog||[]).push([[0],{122:function(e,t,a){e.exports=a(183)},127:function(e,t,a){},164:function(e,t,a){e.exports=a.p+"static/media/default-avatar.5097b024.png"},165:function(e,t,a){e.exports=a.p+"static/media/default-avatar.5097b024.png"},182:function(e){e.exports=JSON.parse('{"apiKey":"AIzaSyCvJiSTwzyqSSFmxYuuns3pXCkBOjq1DU4","authDomain":"blog-app-55880.firebaseapp.com","databaseURL":"https://blog-app-55880.firebaseio.com","projectId":"blog-app-55880","storageBucket":"blog-app-55880.appspot.com","messagingSenderId":"1091103853198","appId":"1:1091103853198:web:5f37ebd14fe5f1f4b597df","measurementId":"G-8E99QCJN1E"}')},183:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(12),o=a.n(c),i=(a(127),a(10)),u=a.n(i),l=a(16),s=a(5),d=a(8),m=a(33),f=a(212),p=a(67),v=a(215),b=a(217),h=a(218),g=a(68),E=a(19),O=a(15),j=a.n(O),x=Object(f.a)((function(){return{avatar:{height:40,width:40,borderRadius:"50%"}}})),w=a(56),C=function(e){var t,a=x(),c=Object(n.useContext)(rt);return r.a.createElement(E.b,{to:(null===(t=c.user)||void 0===t?void 0:t.id)===e.userLink?"/profile":"/users/".concat(e.userLink)},r.a.createElement("img",{className:a.avatar,src:e.avatarLink?e.avatarLink:w}))},y=function(){return{auth:{Auth:at.auth,credential:at.auth.EmailAuthProvider.credential},database:at.database,storage:at.storage}},S=function(){var e=y().storage;return{getDownloadURL:function(t){return e().ref(t).getDownloadURL()},getChildDownloadURL:function(t){return e().ref().child(t).getDownloadURL()},put:function(t,a){return e().ref().child(a).put(t)}}},k=Object(f.a)((function(){return{avatar:{backgroundColor:p.a[500]},card:{padding:20,display:"grid",gridTemplateColumns:"1fr",gridRowGap:20,width:"100%",boxSizing:"border-box"},link:{textDecoration:"none",display:"grid"},text:{overflow:"hidden",textOverflow:"ellipsis"},content:{overflow:"hidden"}}})),N=a(56),D=function(e){var t,a,c=k(),o=e.post,i=Object(n.useState)(""),d=Object(s.a)(i,2),m=d[0],f=d[1],p=S(),O=function(){var e=Object(l.a)(u.a.mark((function e(){var t,a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t=o.user)){e.next=10;break}if(!t.avatar){e.next=9;break}return e.next=5,p.getDownloadURL(t.avatar);case 5:a=e.sent,f(a),e.next=10;break;case 9:f(N);case 10:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(n.useEffect)((function(){O()}),[o.user]),r.a.createElement(E.b,{to:"/posts/".concat(null===(t=o.user)||void 0===t?void 0:t.id,"/").concat(o.id),className:c.link},r.a.createElement(v.a,{className:c.card,variant:"outlined"},r.a.createElement(b.a,{avatar:r.a.createElement(C,{avatarLink:m,userLink:null===(a=e.post.user)||void 0===a?void 0:a.id}),title:o.name,subheader:j()(o.createdAt).format("MMMM Do YYYY, h:mm:ss a")}),r.a.createElement(h.a,{className:c.content},r.a.createElement(g.a,{className:c.text},o.text))))},A=a(236),I=function(){var e=y().database,t=Object(n.useState)(void 0),a=Object(s.a)(t,2),r=a[0],c=a[1];return{data:r,setData:c,fetchData:function(t,a){"on"===a?e().ref(t).on("value",(function(e){c(e.val())})):e().ref(t).once("value",(function(e){c(e.val())}))},addData:function(t,a){return e().ref(a).set(Object(m.a)({},t))},updateData:function(t,a){return e().ref(a).update(Object(m.a)({},t))},removeData:function(t){return e().ref(t).remove()},getKey:function(){return e().ref().push().key||Object(A.a)()}}},L=Object(f.a)((function(e){return{container:{position:"relative",marginTop:80,padding:50},avatar:{backgroundColor:p.a[500]},posts:{display:"grid",gridRowGap:40}}})),R=function(){var e=L(),t=Object(n.useState)([]),a=Object(s.a)(t,2),c=a[0],o=a[1],i=Object(n.useState)([]),u=Object(s.a)(i,2),l=u[0],d=u[1],f=Object(n.useState)([]),p=Object(s.a)(f,2),v=p[0],b=p[1],h=I(),g=h.data,E=h.fetchData,O=I(),j=O.data,x=O.fetchData;return Object(n.useEffect)((function(){E("/users","on"),x("/posts","on")}),[]),Object(n.useEffect)((function(){if(g){var e=Object.values(g),t=Object.keys(g);b(e.map((function(e,a){return Object(m.a)({},e,{id:t[a]})})))}if(j){var a=Object.values(j),n=[];a.forEach((function(e){return Object.values(e).forEach((function(e){return n.push(e)}))})),d(n)}}),[g,j]),Object(n.useEffect)((function(){var e=l.map((function(e){return Object(m.a)({},e,{user:v.find((function(t){return t.id===e.userId}))})})).sort((function(e,t){var a=new Date(e.createdAt).getTime();return new Date(t.createdAt).getTime()-a}));o(e)}),[v,l]),r.a.createElement("div",{className:e.container},r.a.createElement("div",{className:e.posts},c.map((function(e,t){return r.a.createElement(D,{post:e,key:t})}))))},P=a(237),T=a(222),U=function(){var e=y();return{onRegister:function(t,a,n){return e.auth.Auth().createUserWithEmailAndPassword(t,n)},onLogin:function(t,a){return e.auth.Auth().signInWithEmailAndPassword(t,a)},credential:function(t,a){return e.auth.credential(t,a)},onAuthStateChanged:function(t,a,n){return e.auth.Auth().onAuthStateChanged(t)},onSignOut:function(){return e.auth.Auth().signOut()},OnReauthenticateWithCredential:function(t){var a;return null===(a=e.auth.Auth().currentUser)||void 0===a?void 0:a.reauthenticateWithCredential(t)},onCurrentUser:function(){return e.auth.Auth().currentUser}}},Y=Object(f.a)((function(){return{container:{height:"100vh",position:"relative"},card:{padding:20,position:"absolute",top:"50%",left:"50%",width:600,transform:"translate(-50%, -50%)",display:"grid",gridTemplateColumns:"1fr",gridRowGap:20},register:{textDecoration:"none"},root:{marginLeft:"auto"},error:{color:"red"}}})),M=function(){var e=Y(),t=Object(n.useState)(""),a=Object(s.a)(t,2),c=a[0],o=a[1],i=Object(n.useState)(""),u=Object(s.a)(i,2),l=u[0],m=u[1],f=Object(n.useState)(void 0),p=Object(s.a)(f,2),b=p[0],h=p[1],O=Object(d.g)(),j=U();return r.a.createElement("div",{className:e.container},r.a.createElement(v.a,{className:e.card,variant:"outlined"},r.a.createElement(P.a,{id:"standard-basic",label:"Email",value:c,onChange:function(e){return o(e.target.value)}}),r.a.createElement(P.a,{id:"standard-basic",label:"Password",type:"password",value:l,onChange:function(e){return m(e.target.value)}}),r.a.createElement(T.a,{variant:"contained",color:"primary",onClick:function(){j.onLogin(c,l).then((function(){return O.push("/profile")})).catch((function(e){h(e.message)}))}},"Login"),r.a.createElement(g.a,{className:e.root},r.a.createElement(E.b,{className:e.register,to:"/register"},"Register")),b&&r.a.createElement("p",{className:e.error},b)))},W=a(223),B=a(224),z=a(225),G=a(111),F=a(240),q=Object(f.a)((function(){return{icon:{marginLeft:"auto"},logo:{width:"100px",textDecoration:"none",color:"white",fontSize:"35px"},login:{marginLeft:"auto",backgroundColor:"white"},avatar:{height:40,width:40,borderRadius:"50%"}}})),J=a(56),K=function(e){var t=q(),a=Object(d.g)(),c=Object(n.useState)(null),o=Object(s.a)(c,2),i=o[0],u=o[1],l=Boolean(i),m=Object(n.useContext)(rt),f=m.user;Object(n.useEffect)((function(){a.listen((function(){u(null)}))}),[]);return r.a.createElement(W.a,{position:"fixed"},r.a.createElement(B.a,null,r.a.createElement(g.a,null,r.a.createElement(E.b,{className:t.logo,to:"/"},"myBlog.net")),m.auth?r.a.createElement("div",{className:t.icon},r.a.createElement(z.a,{"aria-label":"account of current user","aria-controls":"menu-appbar","aria-haspopup":"true",color:"inherit",onClick:function(e){u(e.currentTarget)}},r.a.createElement("img",{className:t.avatar,src:(null===f||void 0===f?void 0:f.avatar)?f.avatar:J})),r.a.createElement(G.a,{id:"menu-appbar",anchorEl:i,anchorOrigin:{vertical:"top",horizontal:"right"},keepMounted:!0,transformOrigin:{vertical:"top",horizontal:"right"},open:l,onClose:function(){u(null)}},r.a.createElement(F.a,{onClick:function(){u(null),a.push("/profile")}},"Profile"),r.a.createElement(F.a,{onClick:function(){e.onLogout&&(e.onLogout(),a.push("/login"))}},"Logout"),r.a.createElement(F.a,{onClick:function(){a.push("/test")}},"Test"))):r.a.createElement(T.a,{className:t.login,onClick:function(){return a.push("/login")},color:"default"},"Login")))},Q=Object(f.a)((function(){return{container:{height:"100vh",position:"relative"},card:{padding:20,position:"absolute",top:"50%",left:"50%",width:600,transform:"translate(-50%, -50%)",display:"grid",gridTemplateColumns:"1fr",gridRowGap:20},success:{color:"green"},error:{color:"red"},login:{textDecoration:"none"},root:{marginLeft:"auto"}}})),X=function(){var e=Q(),t=Object(n.useState)(""),a=Object(s.a)(t,2),c=a[0],o=a[1],i=Object(n.useState)(""),m=Object(s.a)(i,2),f=m[0],p=m[1],b=Object(n.useState)(""),h=Object(s.a)(b,2),O=h[0],x=h[1],w=Object(n.useState)(""),C=Object(s.a)(w,2),y=C[0],S=C[1],k=Object(n.useState)(void 0),N=Object(s.a)(k,2),D=N[0],A=N[1],L=Object(n.useState)(!1),R=Object(s.a)(L,2),Y=R[0],M=R[1],W=I(),B=Object(d.g)(),z=U(),G=j()().toISOString();return r.a.createElement("div",{className:e.container},r.a.createElement(v.a,{className:e.card,variant:"outlined"},r.a.createElement(P.a,{label:"Login",value:y,onChange:function(e){return S(e.target.value)}}),r.a.createElement(P.a,{label:"Email",value:c,onChange:function(e){return o(e.target.value)}}),r.a.createElement(P.a,{type:"password",label:"Password",value:f,onChange:function(e){return p(e.target.value)}}),r.a.createElement(P.a,{type:"password",label:"Confirm password",value:O,onChange:function(e){return x(e.target.value)}}),r.a.createElement(T.a,{variant:"contained",color:"primary",onClick:function(){var e={email:c,login:y,createdAt:G};f===O?z.onRegister(c,y,f).then(function(){var t=Object(l.a)(u.a.mark((function t(a){return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!a.user){t.next=5;break}return a.user.updateProfile({displayName:y}).then((function(){return M(!0)})).catch((function(e){A(e.message),M(!1)})),t.next=4,W.addData(e,"users/".concat(a.user.uid));case 4:B.push("/profile");case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()).catch((function(e){A(e.message),M(!1)})):A("Passwords aren't equal!")}},"Register"),r.a.createElement(g.a,{className:e.root},r.a.createElement(E.b,{className:e.login,to:"/login"},"Login")),Y&&r.a.createElement("p",{className:e.success},"Success!"),D&&r.a.createElement("p",{className:e.error},D)))},$=a(105),H=a(235),V=a(107),Z=a(106),_=a.n(Z),ee=a(50);function te(e,t){for(var a=Object(ee.head)(e.split(",")),n=Object(ee.last)(e.split(",")),r=Object(ee.last)(a.match(/:(.*?);/)),c=atob(n),o=c.length,i=new Uint8Array(o);o;)i[o-1]=c.charCodeAt(o-1),o-=1;var u=new Blob([i],{type:r});return new File([u],t,{type:r})}function ae(e,t){var a=new FileReader;t&&(a.readAsArrayBuffer(t),a.onloadend=function(){var t=a.result,n=Object(ee.get)(_()(t),"ext","");e(n)})}function ne(e){return(Object(ee.last)(e.name.split("."))||"").toLowerCase()}var re=a(226),ce=a(227),oe=a(228),ie=a(229),ue=a(230),le=a(231),se=a(232),de=a(233),me=Object(f.a)((function(){return{tableContainer:{marginTop:10},postName:{overflow:"hidden"}}})),fe=function(e){var t=me();return r.a.createElement(re.a,{className:t.tableContainer},r.a.createElement(ce.a,null,r.a.createElement(oe.a,null,r.a.createElement(ie.a,null,r.a.createElement(ue.a,{align:"center"},"Posts"),r.a.createElement(ue.a,{align:"center"},"Creation Date"),r.a.createElement(ue.a,{align:"center"},"Edit"),r.a.createElement(ue.a,{align:"center"},"Delete"))),r.a.createElement(le.a,null,e.userPosts.map((function(a){return r.a.createElement(ie.a,{key:a.name},r.a.createElement(ue.a,{align:"center",className:t.postName},r.a.createElement(E.b,{to:"/posts/".concat(a.userId,"/").concat(a.id)},a.name)),r.a.createElement(ue.a,{align:"center"},j()(a.createdAt).format("MMMM Do YYYY, h:mm:ss a")),r.a.createElement(ue.a,{align:"center"},r.a.createElement(z.a,{onClick:function(){return e.onEditPost(a.id)}},r.a.createElement(se.a,null))),r.a.createElement(ue.a,{align:"center"},r.a.createElement(z.a,{onClick:function(){return e.onDeletePost(a.id)}},r.a.createElement(de.a,null))))})))))},pe=a(108),ve=a.n(pe),be=Object(f.a)((function(){return{container:{marginTop:"64px",position:"relative",display:"grid",gridTemplateColumns:"1fr",alignItems:"flex-start"}}})),he=function(e){var t=be();return r.a.createElement("div",{className:ve()(t.container,e.className)},e.children)},ge=Object(f.a)((function(){return{container:{justifyItems:"flex-end",gridColumnGap:40,padding:"20px 100px 20px 50px"},Card:{padding:20,width:600,display:"grid",gridTemplateColumns:"1fr",gridRowGap:20,marginTop:"30px"},avatar:{height:"350px",borderStyle:"solid",borderColor:"gray",width:"100%"},avatarContainer:{display:"grid",gridTemplateColumns:"1fr",gridRowGap:20,width:300,position:"fixed"},inputFile:{display:"none"},informationContainer:{marginRight:15},tableContainer:{marginTop:10},postName:{overflow:"hidden"}}})),Ee=a(164),Oe=function(){var e,t=Object(d.g)(),a=ge(),c=Object(n.useState)(""),o=Object(s.a)(c,2),i=o[0],m=o[1],f=Object(n.useState)(""),p=Object(s.a)(f,2),b=p[0],h=p[1],E=Object(n.useState)(!1),O=Object(s.a)(E,2),x=O[0],w=O[1],C=Object(n.useState)(void 0),y=Object(s.a)(C,2),k=y[0],N=y[1],D=Object(n.useState)(""),L=Object(s.a)(D,2),R=L[0],Y=L[1],M=Object(n.useState)(!1),W=Object(s.a)(M,2),B=W[0],z=W[1],G=Object(n.useState)(void 0),F=Object(s.a)(G,2),q=F[0],J=F[1],K=Object(n.useState)(""),Q=Object(s.a)(K,2),X=Q[0],$=Q[1],Z=Object(n.useState)(""),_=Object(s.a)(Z,2),ee=_[0],re=_[1],ce=Object(n.useState)(""),oe=Object(s.a)(ce,2),ie=oe[0],ue=oe[1],le=Object(n.useState)(!1),se=Object(s.a)(le,2),de=se[0],me=se[1],pe=Object(n.useState)(void 0),ve=Object(s.a)(pe,2),be=ve[0],Oe=ve[1],je=Object(n.useState)([]),xe=Object(s.a)(je,2),we=xe[0],Ce=xe[1],ye=Object(n.useRef)(null),Se=function(e){var t=Object(n.useState)(void 0),a=Object(s.a)(t,2),r=a[0],c=a[1],o=Object(n.useState)(void 0),i=Object(s.a)(o,2),d=i[0],m=i[1],f=Object(n.useState)(void 0),p=Object(s.a)(f,2),v=p[0],b=p[1],h=function(){var e=Object(l.a)(u.a.mark((function e(t){var a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g(t);case 2:if(!e.sent){e.next=9;break}return e.t0=b,e.next=6,g(t);case 6:return e.t1=e.sent,(0,e.t0)(e.t1),e.abrupt("return");case 9:b(void 0),(a=new FileReader).readAsDataURL(t),Object(V.fromEvent)(a,"loadend").subscribe(Object(l.a)(u.a.mark((function e(){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:try{m(a.result),c(te(a.result,t.name))}catch(v){}case 1:case"end":return e.stop()}}),e)}))));case 13:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),g=function(){var t=Object(l.a)(u.a.mark((function t(a){var n;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!(a.size>e.maxFileSize)){t.next=2;break}return t.abrupt("return","Upload the file less than ".concat(e.maxFileSize/1048576," MB."));case 2:return t.next=4,new Promise((function(e){return ae(e,a)}));case 4:if(n=t.sent,!(e.whiteList.indexOf(n)<0)){t.next=7;break}return t.abrupt("return","The file type does not match the extension. Available extensions: ".concat(e.whiteList.join(", ")));case 7:if(ne(a)===n){t.next=9;break}return t.abrupt("return","The file type does not match the extension. Please, try again.");case 9:return t.abrupt("return",void 0);case 10:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();return{file:r,src:d,getError:g,loadFile:h,deleteFile:function(){m(void 0),c(void 0),b(void 0)},setSrc:m,setError:b,error:v}}({whiteList:["jpg","png"],maxFileSize:2097152}),ke=Se.src,Ne=Se.loadFile,De=Se.file,Ae=Se.setSrc,Ie=I(),Le=S(),Re=U(),Pe=Object(n.useContext)(rt),Te=null===(e=Pe.user)||void 0===e?void 0:e.id,Ue=Pe.user,Ye=I(),Me=Ye.data,We=Ye.fetchData;Object(n.useEffect)((function(){Ue&&(Ae(Ue.avatar),Ue.email&&h(Ue.email),Ue.login&&Y(Ue.login),Ue.createdAt&&m(Ue.createdAt))}),[Ue,Y,h,Ae]),Object(n.useEffect)((function(){We("posts/".concat(Te),"on")}),[Te]),Object(n.useEffect)((function(){if(Me){var e=Object.values(Me);Ce(e)}else Ce([])}),[Me]);var Be=function(){var e=Object(l.a)(u.a.mark((function e(t){var a,n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=null===(a=t.target.files)||void 0===a?void 0:a.item(0)){e.next=3;break}return e.abrupt("return");case 3:return e.next=5,Ne(n);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return r.a.createElement(he,{className:a.container},r.a.createElement("div",{className:a.avatarContainer},r.a.createElement("img",{className:a.avatar,src:ke||Ee}),r.a.createElement("input",{type:"file",className:a.inputFile,ref:ye,onChange:Be}),r.a.createElement(T.a,{variant:"contained",color:"primary",fullWidth:!0,onClick:function(){ye.current&&ye.current.click()}},"Choose image"),r.a.createElement(T.a,{variant:"contained",color:"primary",fullWidth:!0,onClick:function(){if(De){var e=Object(A.a)();Le.put(De,e).then(Object(l.a)(u.a.mark((function t(){var a;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Le.getChildDownloadURL(e);case 2:a=t.sent,Ae(a),Ie.updateData({avatar:e},"users/".concat(Te)),Pe.updateUser({avatar:a});case 6:case"end":return t.stop()}}),t)}))))}}},"Upload"),r.a.createElement(T.a,{variant:"contained",color:"primary",fullWidth:!0,onClick:function(){t.push("/article")}},"Write an article")),r.a.createElement("div",{className:a.informationContainer},r.a.createElement(v.a,{className:a.Card,variant:"outlined"},r.a.createElement(g.a,{variant:"h5",component:"h4"},"Creation date: ",j()(i).format("MMMM Do YYYY, h:mm:ss a"))),r.a.createElement(v.a,{className:a.Card,variant:"outlined"},r.a.createElement(g.a,{variant:"h5",component:"h4"},"Your email:"),r.a.createElement(P.a,{value:b,onChange:function(e){return h(e.target.value)}}),r.a.createElement(T.a,{variant:"contained",color:"primary",onClick:function(){Pe.updateUser({email:b}).then((function(){w(!0),Ie.updateData({email:b},"users/".concat(Te))})).catch((function(e){return N(e.message)}))}},"Change your email"),x&&r.a.createElement(H.a,{severity:"success"},"Email successfully changed!"),k&&r.a.createElement(H.a,{severity:"error"},k)),r.a.createElement(v.a,{className:a.Card,variant:"outlined"},r.a.createElement(g.a,{variant:"h5",component:"h4"},"Your username:"),r.a.createElement(P.a,{value:R,onChange:function(e){return Y(e.target.value)}}),r.a.createElement(T.a,{variant:"contained",color:"primary",onClick:function(){Pe.updateUser({login:R}).then((function(){z(!0),Ie.updateData({login:R},"users/".concat(Te))})).catch((function(e){return J(e.message)}))}},"Change your username"),B&&r.a.createElement(H.a,{severity:"success"},"username successfully changed!"),q&&r.a.createElement(H.a,{severity:"error"},q)),r.a.createElement(v.a,{className:a.Card,variant:"outlined"},r.a.createElement(g.a,{variant:"h5",component:"h4"},"Change your password:"),r.a.createElement(P.a,{type:"password",value:ie,onChange:function(e){return ue(e.target.value)},label:"Current password"}),r.a.createElement(P.a,{type:"password",value:X,onChange:function(e){return $(e.target.value)},label:"New password"}),r.a.createElement(P.a,{type:"password",value:ee,onChange:function(e){return re(e.target.value)},label:"Repeat new password"}),r.a.createElement(T.a,{variant:"contained",color:"primary",onClick:function e(){Pe&&(X===ee?Pe.updatePassword(X).then((function(){return me(!0)})).catch((function(t){var a;if("auth/requires-recent-login"===t.code){if(null===(a=Pe.user)||void 0===a?void 0:a.email){var n=Re.credential(Pe.user.email,ie);Pe.reauthenticateWithCredential(n).then(e).catch((function(e){return Oe(e.message)}))}}else Oe(t.message)})):Oe("Passwords aren't equal"))}},"Change your password"),de&&r.a.createElement(H.a,{severity:"success"},"Password successfully changed!"),be&&r.a.createElement(H.a,{severity:"error"},be)),r.a.createElement(fe,{userPosts:we,onDeletePost:function(e){Ie.removeData("posts/".concat(Te,"/").concat(e)),Ie.removeData("comments/".concat(e))},onEditPost:function(e){t.push("/edit/".concat(e))}})))},je=Object(f.a)((function(){return{container:{marginTop:"64px",position:"relative",display:"grid",gridTemplateColumns:"1fr",justifyItems:"center",padding:150,paddingTop:"50px",paddingBottom:"50px",alignItems:"flex-start",gridRowGap:20}}})),xe=function(){var e=je(),t=Object(n.useState)(""),a=Object(s.a)(t,2),c=a[0],o=a[1],i=Object(n.useState)(""),u=Object(s.a)(i,2),l=u[0],m=u[1],f=Object(n.useState)(!1),p=Object(s.a)(f,2),v=p[0],b=p[1],h=Object(n.useState)(!1),E=Object(s.a)(h,2),O=E[0],x=E[1],w=I(),C=Object(n.useContext)(rt),y=Object(d.g)();return r.a.createElement("div",{className:e.container},r.a.createElement(g.a,{variant:"h3",component:"h1"},"Write your own article"),r.a.createElement(P.a,{required:!0,label:"Article name",variant:"outlined",fullWidth:!0,autoFocus:!0,value:c,onChange:function(e){return o(e.target.value)},inputProps:{maxLength:40}}),r.a.createElement(P.a,{required:!0,label:"Article text",multiline:!0,rows:14,variant:"outlined",fullWidth:!0,value:l,onChange:function(e){return m(e.target.value)}}),r.a.createElement(T.a,{variant:"contained",color:"primary",fullWidth:!0,onClick:function(){var e,t=null===(e=C.user)||void 0===e?void 0:e.id,a=j()().toISOString(),n=Object(A.a)(),r={id:n,name:c,text:l,createdAt:a,userId:t};c.length>0&&l.length>0?w.addData(r,"posts/".concat(t,"/").concat(n)).then((function(){o(""),m(""),b(!0),y.push("/posts/".concat(t,"/").concat(n))})):x(!0)}},"Upload"),v&&r.a.createElement(H.a,{severity:"success"},"Your post has been added!"),O&&r.a.createElement(H.a,{severity:"error"},O))},we=Object(f.a)((function(){return{card:{width:"100%"}}})),Ce=function(e){var t,a,n,c=we();return r.a.createElement(v.a,{className:c.card,variant:"outlined"},r.a.createElement(b.a,{avatar:r.a.createElement(C,{avatarLink:null===(t=e.user)||void 0===t?void 0:t.avatar,userLink:null===(a=e.user)||void 0===a?void 0:a.id}),title:null===(n=e.user)||void 0===n?void 0:n.login,subheader:j()(e.postCreatedDate).format("MMMM Do YYYY, h:mm:ss a")}))},ye=Object(f.a)((function(){return{card:{width:"100%",padding:15,boxSizing:"border-box"},text:{overflow:"hidden",textOverflow:"ellipsis"}}})),Se=function(e){var t,a,n=ye();return r.a.createElement(v.a,{className:n.card,variant:"outlined"},r.a.createElement(g.a,{variant:"h4",align:"center"},null===(t=e.post)||void 0===t?void 0:t.name),r.a.createElement(g.a,{variant:"body1",paragraph:!0,className:n.text},null===(a=e.post)||void 0===a?void 0:a.text))},ke=Object(f.a)((function(){return{avatar:{backgroundColor:p.a[500]},card:{padding:20,display:"grid",gridTemplateColumns:"1fr",gridRowGap:20,width:"100%",boxSizing:"border-box",marginTop:15},text:{overflow:"hidden",textOverflow:"ellipsis"},content:{overflow:"hidden"},buttons:{display:"flex"},button:{alignItems:"flex-start",marginRight:10},uploadEditedCommentButton:{marginTop:10}}})),Ne=a(56),De=function(e){var t,a,c,o,i,m,f,p=Object(n.useState)(""),E=Object(s.a)(p,2),O=E[0],x=E[1],w=Object(n.useState)(""),y=Object(s.a)(w,2),k=y[0],N=y[1],D=Object(n.useState)(!1),A=Object(s.a)(D,2),L=A[0],R=A[1],U=Object(n.useState)(""),Y=Object(s.a)(U,2),M=Y[0],W=Y[1],B=I(),G=B.data,F=B.fetchData,q=ke(),J=Object(d.h)().id,K=null===(t=Object(n.useContext)(rt).user)||void 0===t?void 0:t.id,Q=null===(a=e.comment)||void 0===a?void 0:a.commentId,X=S(),$=I();Object(n.useEffect)((function(){var t;F("users/".concat(null===(t=e.comment)||void 0===t?void 0:t.userId),"on")}),[null===(c=e.comment)||void 0===c?void 0:c.userId]),Object(n.useEffect)((function(){H()}),[G]);var H=function(){var e=Object(l.a)(u.a.mark((function e(){var t;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!G){e.next=10;break}if(x(G.login),!G.avatar){e.next=9;break}return e.next=5,X.getDownloadURL(G.avatar);case 5:t=e.sent,N(t),e.next=10;break;case 9:N(Ne);case 10:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return r.a.createElement(v.a,{className:q.card,variant:"outlined"},r.a.createElement(b.a,{avatar:r.a.createElement(C,{avatarLink:k,userLink:null===(o=e.comment)||void 0===o?void 0:o.userId}),title:O,subheader:j()(null===(i=e.comment)||void 0===i?void 0:i.createdAt).format("MMMM Do YYYY, h:mm:ss a"),action:r.a.createElement(r.a.Fragment,null,K===(null===(m=e.comment)||void 0===m?void 0:m.userId)&&r.a.createElement("div",{className:q.buttons},r.a.createElement(z.a,{className:q.button,onClick:function(){R(!L),e.comment&&W(e.comment.comment)}},r.a.createElement(se.a,null)),r.a.createElement(z.a,{className:q.button,onClick:function(){$.removeData("comments/".concat(J,"/").concat(Q))}},r.a.createElement(de.a,null))))}),r.a.createElement(h.a,{className:q.content},L?r.a.createElement("div",null,r.a.createElement(P.a,{variant:"outlined",fullWidth:!0,multiline:!0,rows:4,value:M,onChange:function(e){return W(e.target.value)}}),r.a.createElement(T.a,{variant:"contained",color:"primary",className:q.uploadEditedCommentButton,onClick:function(){var t;$.addData({comment:M,commentId:Q,createdAt:null===(t=e.comment)||void 0===t?void 0:t.createdAt,userId:K},"comments/".concat(J,"/").concat(Q)).then((function(){R(!1),W("")}))}},"Upload")):r.a.createElement(g.a,{className:q.text},null===(f=e.comment)||void 0===f?void 0:f.comment)))},Ae=Object(f.a)((function(){return{card:{width:"100%",padding:15,boxSizing:"border-box"}}})),Ie=function(e){var t=e.comments,a=void 0===t?[]:t,n=Ae();return r.a.createElement(v.a,{className:n.card,variant:"outlined"},r.a.createElement(g.a,{variant:"h4"},"Comments:"),r.a.createElement("div",null,a.map((function(e){return r.a.createElement(De,{key:e.commentId,comment:e})}))))},Le=Object(f.a)((function(){return{card:{width:"100%",padding:15,boxSizing:"border-box"},commentButton:{marginTop:15}}})),Re=function(e){var t=Le(),a=Object(n.useState)(""),c=Object(s.a)(a,2),o=c[0],i=c[1],u=Object(n.useState)(!1),l=Object(s.a)(u,2),d=l[0],m=l[1],f=Object(n.useState)(!1),p=Object(s.a)(f,2),b=p[0],h=p[1];return r.a.createElement(v.a,{className:t.card,variant:"outlined"},r.a.createElement(g.a,{variant:"h4"},"Write a comment:"),r.a.createElement(P.a,{variant:"outlined",fullWidth:!0,multiline:!0,rows:6,value:o,onChange:function(e){return i(e.target.value)}}),r.a.createElement(T.a,{variant:"contained",color:"primary",fullWidth:!0,className:t.commentButton,onClick:function(){o.length>0?e.onCreateComment(o).then((function(){m(!0),i("")})):h(!0)}},"Upload"),d&&r.a.createElement(H.a,{severity:"success"},"Your comment has been added!"),b&&r.a.createElement(H.a,{severity:"error"},"Comment field must not be empty!"))},Pe=Object(f.a)((function(){return{container:{marginTop:"64px",position:"relative",display:"grid",gridTemplateColumns:"1fr",justifyItems:"center",padding:50,paddingTop:"50px",paddingBottom:"50px",alignItems:"flex-start",gridRowGap:20}}})),Te=function(){var e=Object(d.h)(),t=e.postId,a=e.creatorId,c=Object(n.useState)([]),o=Object(s.a)(c,2),i=o[0],m=o[1],f=Object(n.useState)(),p=Object(s.a)(f,2),v=p[0],b=p[1],h=Object(n.useContext)(rt),g=Pe(),E=I(),O=E.data,x=E.fetchData,w=I(),C=w.data,y=w.fetchData,k=I(),N=k.data,D=k.fetchData,A=I(),L=S();Object(n.useEffect)((function(){x("/posts/".concat(a,"/").concat(t),"once"),D("comments/".concat(t),"on")}),[]),Object(n.useEffect)((function(){y("/users/".concat(null===O||void 0===O?void 0:O.userId),"once")}),[O]),Object(n.useEffect)((function(){R()}),[C]);var R=function(){var e=Object(l.a)(u.a.mark((function e(){var t;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!C){e.next=9;break}if(!C.avatar){e.next=8;break}return e.next=4,L.getDownloadURL(C.avatar);case 4:t=e.sent,b({id:null===O||void 0===O?void 0:O.userId,login:C.login,email:C.email,avatar:t,createdAt:C.createdAt}),e.next=9;break;case 8:b({id:null===O||void 0===O?void 0:O.userId,login:C.login,email:C.email,createdAt:C.createdAt});case 9:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();Object(n.useEffect)((function(){if(N){var e=Object.values(N);m(e.reverse())}}),[N]);return r.a.createElement("div",{className:g.container},r.a.createElement(Ce,{user:v,postCreatedDate:null===O||void 0===O?void 0:O.createdAt}),r.a.createElement(Se,{post:O}),r.a.createElement(Re,{postId:String(t),onCreateComment:function(e){var a,n=null===(a=h.user)||void 0===a?void 0:a.id,r=j()().toISOString(),c=A.getKey(),o={createdAt:r,comment:e,userId:n,commentId:c};return A.addData(o,"comments/".concat(t,"/").concat(c))}}),r.a.createElement(Ie,{comments:i}))},Ue=a(66),Ye=function(e){var t=e.auth,a=e.render,n=Object(Ue.a)(e,["auth","render"]);return r.a.createElement(d.b,Object.assign({},n,{render:function(e){return t?r.a.createElement(d.a,{exact:!0,push:!0,to:"/"}):a(e)}}))},Me=function(e){var t=e.render,a=e.auth,r=Object(Ue.a)(e,["render","auth"]);return n.createElement(d.b,Object.assign({},r,{render:function(e){return a?t(e):n.createElement(d.a,{exact:!0,to:"/"})}}))},We=Object(f.a)((function(){return{container:{justifyItems:"center",padding:"50px 150px 50px 150px",gridRowGap:20}}})),Be=function(){var e,t=We(),a=Object(d.g)(),c=Object(n.useState)(""),o=Object(s.a)(c,2),i=o[0],u=o[1],l=Object(n.useState)(""),m=Object(s.a)(l,2),f=m[0],p=m[1],v=Object(n.useState)(!1),b=Object(s.a)(v,2),h=b[0],E=b[1],O=Object(n.useState)(!1),x=Object(s.a)(O,2),w=x[0],C=x[1],y=I(),S=y.data,k=y.fetchData,N=y.addData,D=null===(e=Object(n.useContext)(rt).user)||void 0===e?void 0:e.id,A=Object(d.h)().postId;Object(n.useEffect)((function(){k("posts/".concat(D,"/").concat(A),"once")}),[]),Object(n.useEffect)((function(){S&&(u(S.name),p(S.text))}),[S]);return r.a.createElement(he,{className:t.container},r.a.createElement(g.a,{variant:"h3",component:"h1"},"Edit your article"),r.a.createElement(P.a,{required:!0,label:"Article name",variant:"outlined",fullWidth:!0,autoFocus:!0,value:i,onChange:function(e){return u(e.target.value)},inputProps:{maxLength:40}}),r.a.createElement(P.a,{required:!0,label:"Article text",multiline:!0,rows:14,variant:"outlined",fullWidth:!0,value:f,onChange:function(e){return p(e.target.value)}}),r.a.createElement(T.a,{variant:"contained",color:"primary",fullWidth:!0,onClick:function(){var e=j()().toISOString(),t={name:i,text:f,userId:D,createdAt:e,id:A};i.length>0&&f.length>0?N(t,"/posts/".concat(D,"/").concat(A)).then((function(){u(""),p(""),E(!0),a.push("/posts/".concat(D,"/").concat(A))})):C(!0)}},"Upload"),h&&r.a.createElement(H.a,{severity:"success"},"Your post has been edited!"),w&&r.a.createElement(H.a,{severity:"error"},w))},ze=Object(f.a)((function(){return{tableContainer:{marginTop:10},postName:{overflow:"hidden"}}})),Ge=function(e){var t=ze();return r.a.createElement(re.a,{className:t.tableContainer},r.a.createElement(ce.a,null,r.a.createElement(oe.a,null,r.a.createElement(ie.a,null,r.a.createElement(ue.a,{align:"center"},"Posts"),r.a.createElement(ue.a,{align:"center"},"Creation Date"))),r.a.createElement(le.a,null,e.userPosts.map((function(e){return r.a.createElement(ie.a,{key:e.name},r.a.createElement(ue.a,{align:"center",className:t.postName},r.a.createElement(E.b,{to:"/posts/".concat(e.userId,"/").concat(e.id)},e.name)),r.a.createElement(ue.a,{align:"center"},j()(e.createdAt).format("MMMM Do YYYY, h:mm:ss a")))})))))},Fe=Object(f.a)((function(){return{container:{justifyItems:"flex-end",gridColumnGap:40,padding:"20px 100px 20px 50px"},card:{padding:20,width:600,display:"grid",gridTemplateColumns:"1fr",gridRowGap:20,marginTop:"30px"},avatar:{height:"350px",borderStyle:"solid",borderColor:"gray",width:"100%"},avatarContainer:{display:"grid",gridTemplateColumns:"1fr",gridRowGap:20,width:300,position:"fixed"},informationContainer:{marginRight:15}}})),qe=a(165),Je=function(){var e=Fe(),t=Object(d.h)().userId,a=Object(n.useState)([]),c=Object(s.a)(a,2),o=c[0],i=c[1],m=Object(n.useState)(void 0),f=Object(s.a)(m,2),p=f[0],b=f[1],h=I(),E=h.data,O=h.fetchData,x=I(),w=x.data,C=x.fetchData,y=S();Object(n.useEffect)((function(){O("users/".concat(t),"on"),C("posts/".concat(t),"on")}),[]),Object(n.useEffect)((function(){k()}),[E]),Object(n.useEffect)((function(){if(w){var e=Object.values(w);i(e)}else i([])}),[w]);var k=function(){var e=Object(l.a)(u.a.mark((function e(){var t;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!E){e.next=9;break}if(!E.avatar){e.next=8;break}return e.next=4,y.getDownloadURL(E.avatar);case 4:t=e.sent,b({id:E.id,login:E.login,email:E.email,avatar:t,createdAt:E.createdAt}),e.next=9;break;case 8:b({id:E.id,login:E.login,email:E.email,createdAt:E.createdAt});case 9:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return r.a.createElement(he,{className:e.container},r.a.createElement("div",{className:e.avatarContainer},r.a.createElement("img",{className:e.avatar,src:(null===p||void 0===p?void 0:p.avatar)||qe})),r.a.createElement("div",{className:e.informationContainer},r.a.createElement(v.a,{className:e.card,variant:"outlined"},r.a.createElement(g.a,{variant:"h5",component:"h4"},"Creation date: ",j()(null===p||void 0===p?void 0:p.createdAt).format("MMMM Do YYYY, h:mm:ss a"))),r.a.createElement(v.a,{className:e.card,variant:"outlined"},r.a.createElement(g.a,{variant:"h5",component:"h4"},null===p||void 0===p?void 0:p.login)),r.a.createElement(Ge,{userPosts:o})))},Ke=a(109),Qe=a(110),Xe=a(78),$e=a.n(Xe),He=new(function(){function e(){Object(Ke.a)(this,e),this.client=$e.a.create(),this.handlers=[]}return Object(Qe.a)(e,[{key:"init",value:function(e){this.client=$e.a.create({baseURL:e})}},{key:"subscribe",value:function(e){this.handlers.push(e)}},{key:"get",value:function(e,t){var a=this;return new Promise((function(n,r){a.client.get(e,{params:t}).then((function(e){return n(e.data)})).catch((function(e){r(e),a.handlers.forEach((function(t){return t(e)}))}))}))}},{key:"put",value:function(e,t,a){var n=this;return new Promise((function(r,c){n.client.put(e,Object(m.a)({},t),{params:a}).then((function(e){return r(e.data)})).catch((function(e){c(e),n.handlers.forEach((function(t){return t(e)}))}))}))}},{key:"post",value:function(e,t,a){var n=this;return new Promise((function(r,c){n.client.post(e,Object(m.a)({},t),{params:a}).then((function(e){return r(e.data)})).catch((function(e){c(e),n.handlers.forEach((function(t){return t(e)}))}))}))}},{key:"delete",value:function(){var e=Object(l.a)(u.a.mark((function e(t,a){var n=this;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e,r){n.client.delete(t,{params:a}).then((function(t){return e(t.data)})).catch((function(e){r(e),n.handlers.forEach((function(t){return t(e)}))}))})));case 1:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}()}]),e}()),Ve=a(221),Ze=a(239),_e=a(234),et=Object(f.a)((function(){return{container:{position:"relative",marginTop:80,padding:50},formControl:{margin:10,minWidth:500},card:{padding:20,display:"grid",gridTemplateColumns:"1fr",gridRowGap:20,width:"100%",boxSizing:"border-box"},text:{overflow:"hidden",textOverflow:"ellipsis"},content:{overflow:"hidden"}}})),tt=function(){var e=et(),t=Object(n.useState)([]),a=Object(s.a)(t,2),c=a[0],o=a[1],i=Object(n.useState)(),u=Object(s.a)(i,2),l=u[0],d=u[1],m=Object(n.useState)(""),f=Object(s.a)(m,2),p=f[0],E=f[1],O=Object(n.useState)([]),j=Object(s.a)(O,2),x=j[0],w=j[1];Object(n.useEffect)((function(){He.get("/posts").then((function(e){o(e)}))}),[]);return r.a.createElement("div",{className:e.container},r.a.createElement(Ve.a,{className:e.formControl},r.a.createElement(Ze.a,null,"Posts"),r.a.createElement(_e.a,{value:p,onChange:function(e){He.get("posts/".concat(e.target.value)).then((function(t){E(e.target.value),d(t),He.get("posts/".concat(e.target.value,"/comments")).then((function(e){w(e)}))}))}},c.map((function(e){return r.a.createElement(F.a,{value:e.id,key:e.id},e.title)})))),l&&r.a.createElement(v.a,{className:e.card,variant:"outlined"},r.a.createElement(b.a,{title:(null===l||void 0===l?void 0:l.title)||"Title"}),r.a.createElement(h.a,{className:e.content},r.a.createElement(g.a,{className:e.text},(null===l||void 0===l?void 0:l.body)||"Text"))),x&&x.map((function(t){return r.a.createElement(v.a,{key:t.id,className:e.card,variant:"outlined"},r.a.createElement(b.a,{title:t.name}),r.a.createElement(h.a,{className:e.content},r.a.createElement(g.a,{className:e.text},t.body)))})))},at=$,nt=a(182);at.initializeApp(nt),He.init("https://jsonplaceholder.typicode.com");var rt=Object(n.createContext)({auth:!1,user:{email:"",login:"",id:"",avatar:null},updateUser:function(e){return Promise.resolve()},updatePassword:function(e){return Promise.resolve()},reauthenticateWithCredential:function(e){return Promise.resolve()}});var ct=function(){var e=Object(n.useState)(!1),t=Object(s.a)(e,2),a=t[0],c=t[1],o=Object(n.useState)(void 0),i=Object(s.a)(o,2),m=i[0],f=i[1],p=Object(d.g)(),v=S(),b=U(),h=I(),g=h.data,E=h.fetchData;Object(n.useEffect)((function(){window.onbeforeunload=function(){localStorage.setItem("pathBeforeReload",window.location.pathname)};var e=localStorage.getItem("pathBeforeReload");e&&p.push(e)}),[]),Object(n.useEffect)((function(){b.onAuthStateChanged(function(){var e=Object(l.a)(u.a.mark((function e(t){var a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t){e.next=11;break}return c(!!t),t&&t.email&&t.displayName&&f({login:t.displayName,email:t.email,avatar:t.photoURL,id:t.uid}),e.next=5,E("users/".concat(null===m||void 0===m?void 0:m.id),"once");case 5:if(!(null===g||void 0===g?void 0:g.avatar)){e.next=11;break}return e.next=8,v.getDownloadURL(null===g||void 0===g?void 0:g.avatar);case 8:a=e.sent,t.updateProfile({photoURL:a}),O({avatar:a});case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}),[]);var O=function(e){m&&f({id:m.id,email:e.email||m.email,login:e.login||m.login,avatar:e.avatar||m.avatar});var t=b.onCurrentUser();if(t){if((null===t||void 0===t?void 0:t.email)!==(null===e||void 0===e?void 0:e.email)&&e.email)return t.updateEmail(e.email);if((null===t||void 0===t?void 0:t.displayName)!==e.login&&e.login)return t.updateProfile({displayName:e.login});if((null===t||void 0===t?void 0:t.photoURL)!==e.avatar&&e.avatar)return t.updateProfile({photoURL:e.avatar})}return Promise.resolve()};return r.a.createElement(rt.Provider,{value:{auth:a,user:m,updateUser:O,updatePassword:function(e){var t=b.onCurrentUser();return t?t.updatePassword(e):Promise.resolve()},reauthenticateWithCredential:function(e){return b.OnReauthenticateWithCredential(e),Promise.resolve()}}},r.a.createElement(K,{onLogout:function(){b.onSignOut().then((function(){return c(!1)}))}}),r.a.createElement(d.d,null,r.a.createElement(d.b,{exact:!0,path:"/",component:R}),r.a.createElement(Ye,{auth:a,path:"/login",render:function(){return r.a.createElement(M,null)}}),r.a.createElement(d.b,{path:"/register",component:X}),r.a.createElement(Me,{auth:a,path:"/profile",render:function(){return r.a.createElement(Oe,null)}}),r.a.createElement(Me,{auth:a,path:"/users/:userId",render:function(){return r.a.createElement(Je,null)}}),r.a.createElement(Me,{auth:a,path:"/article",render:function(){return r.a.createElement(xe,null)}}),r.a.createElement(Me,{auth:a,path:"/edit/:postId",render:function(){return r.a.createElement(Be,null)}}),r.a.createElement(d.b,{path:"/posts/:creatorId/:postId",component:Te}),r.a.createElement(d.b,{path:"/test",component:tt})))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(r.a.createElement(E.a,null,r.a.createElement(ct,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},56:function(e,t,a){e.exports=a.p+"static/media/default-avatar.5097b024.png"}},[[122,1,2]]]);
//# sourceMappingURL=main.dd139a4b.chunk.js.map